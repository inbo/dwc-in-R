<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Damiano Oldoni" />
<meta name="author" content="Stijn Van Hoey" />
<meta name="author" content="Lien Reyserhove" />
<meta name="author" content="Peter Desmet" />

<meta name="date" content="2018-02-26" />

<title>dplyr</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="static/css/inbo.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 45px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 50px;
  margin-top: -50px;
}

.section h2 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h3 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h4 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h5 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h6 {
  padding-top: 50px;
  margin-top: -50px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Standardizing data to Darwin Core using R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="tidy.html">Tidy data</a>
</li>
<li>
  <a href="dplyr.html">dplyr</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Darwin Core mapping
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dwc-mapping.html">Tutorial</a>
    </li>
    <li>
      <a href="dwc-mapping-exercise.html">Exercise</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/inbo/dwc-in-R">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">dplyr</h1>
<h4 class="author"><em>Damiano Oldoni</em></h4>
<h4 class="author"><em>Stijn Van Hoey</em></h4>
<h4 class="author"><em>Lien Reyserhove</em></h4>
<h4 class="author"><em>Peter Desmet</em></h4>
<h4 class="date"><em>2018-02-26</em></h4>

</div>


<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>This tutorial will provide you the know-how for importing and analysing (tidy) data. We will use the same dataframe to test the most typical dplyr functionalities. There is no better way to improve your programming skills than trying it yourself. Donâ€™t be shy to make faults and take a look to the <a href="https://www.rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-3.pdf">base R cheatsheet</a> and the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">dplyr cheatsheet</a>: we do it constantly.</p>
<p>First of all, we need to load some libraries which are part of the tidyverse ecosystem:</p>
<pre class="r"><code>library(readr)
library(dplyr)
library(tidyr)</code></pre>
<p>Alternatively, you can load all tidyverse libraries at once by:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
</div>
<div id="read-data" class="section level1">
<h1><span class="header-section-number">2</span> Read data</h1>
<p>First of all, we need to import data in R. The most user friendly way to do it is by using the interface provided by RStudio. In the Environment window, click on <code>Import Dataset</code> and select <code>From Text (readr)...</code>. A window will pop-up. Follow the next steps:</p>
<ol style="list-style-type: decimal">
<li>Click on <code>Browse</code> to selet the text file you want to import</li>
<li>Select the right delimiter</li>
<li>Check whether the class of the column values fits your purpose and in case apply changes by clicking on the class name below the column name</li>
<li>Change the name in <code>code preview</code> if you prefer to save the data with a different name than filename</li>
<li>Click on <code>Import</code></li>
</ol>
<p>A dataframe is automatically generated and, very handy, the code to generate it as well! We suggest to use this graphic interface at the beginning in order to be familiar with the most typical parameters (e.g. <code>sep</code>, <code>col_types</code>, <code>col_names</code>, <code>row_names</code>). After a while you will find that writing the code is way faster than a long series of mouse clicks.</p>
<div id="exercises" class="section level2">
<h2><span class="header-section-number">2.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>Read <code>survey_data_spreadsheet_tidy.csv</code>. Check whether the columns match the following types:
<ul>
<li><code>date</code>: <code>double</code></li>
<li><code>species</code>: <code>character</code></li>
<li><code>plot</code>: <code>integer</code></li>
<li><code>sex</code>: <code>character</code></li>
<li><code>weight_in_g</code>: <code>integer</code></li>
<li><code>device_remarks</code>: <code>character</code></li>
</ul></li>
<li>Save the data into <code>data</code>:</li>
</ol>
</div>
</div>
<div id="explore-data" class="section level1">
<h1><span class="header-section-number">3</span> Explore data</h1>
<p>Before to start manipulate data, it is best practice exploring the imported dataframe in order to check whether everything is corectly imported and to have an idea about the data we are going to analyse/manipulate. R gives us several tools to do it, which you can test immediately by using one of the many dataframes from the <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/00Index.html">R Datasets package</a>, automatically loaded when you open R. We will use the <code>CO2</code> dataframe about the carbon dioxide uptake in grass plant <em>Echinochloa crus-galli</em> (details can be found <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/zCO2.html">here</a>)</p>
<ol style="list-style-type: decimal">
<li><strong><code>head(CO2)</code></strong> returns the first part of a data frame. It works with several other data types (vectors, tables, â€¦). Specifiy how many rows to display with parameter <code>n</code>: <code>haed(CO2, n = )</code>, default <code>n = 6</code></li>
<li><strong><code>view(CO2)</code></strong> opens the entire dataframe in viewer. If dataframe is very big, then your computer can slow down sensibly and Rstudio can eventually crash. Be aware of it!</li>
<li><strong><code>class(CO2)</code></strong> if <code>CO2</code> is a dataframe then <code>&quot;data.frame&quot;</code> will show up</li>
<li><strong><code>str(CO2)</code></strong> displays the internal structure of the dataframe</li>
<li><strong><code>col_names(CO2)</code></strong> display column names</li>
<li><strong><code>nrow(CO2)</code></strong> returns the number of rows of the dataframe</li>
<li><strong><code>ncol(CO2)</code></strong> return the number of rows of the dataframe</li>
</ol>
<div id="exercises-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Exercises</h2>
<p>Test the functions introduced above to our dataframe <code>data</code>. In particular:</p>
<ol style="list-style-type: decimal">
<li><p>Display column names:</p></li>
<li><p>How many columns are there?</p></li>
<li><p>How many rows are there?</p></li>
<li><p>Display the first 10 records:</p></li>
<li><p>Display data in viewer:</p></li>
<li><p>Display structure of data:</p></li>
</ol>
</div>
</div>
<div id="sort-data" class="section level1">
<h1><span class="header-section-number">4</span> Sort data</h1>
<p>It is normally useful to sort data. The package <code>dplyr</code> offers the function <code>arrange()</code> to do it:</p>
<pre class="r"><code>arrange(CO2, conc, uptake)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["conc"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uptake"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Mc2","2":"Mississippi","3":"chilled","4":"95","5":"7.7"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"95","5":"9.3"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"95","5":"10.5"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"95","5":"10.6"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"95","5":"10.6"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"95","5":"11.3"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"95","5":"12.0"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"95","5":"13.6"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"95","5":"14.2"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"95","5":"15.1"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","5":"16.0"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"95","5":"16.2"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"175","5":"11.4"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"175","5":"14.9"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"175","5":"18.0"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"175","5":"19.2"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"175","5":"19.4"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"175","5":"21.0"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"175","5":"22.0"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"175","5":"24.1"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"175","5":"27.3"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"175","5":"27.3"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","5":"30.4"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"175","5":"32.4"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"250","5":"12.3"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"250","5":"17.9"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"250","5":"18.1"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"250","5":"25.8"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"250","5":"26.2"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"250","5":"30.3"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"250","5":"30.6"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"250","5":"34.8"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"250","5":"35.0"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"250","5":"37.1"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"250","5":"38.1"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"250","5":"40.3"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"350","5":"13.0"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"350","5":"17.9"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"350","5":"18.9"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"350","5":"27.9"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"350","5":"30.0"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"350","5":"31.8"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"350","5":"34.0"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"350","5":"34.6"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"350","5":"37.2"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"350","5":"38.8"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"350","5":"41.8"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"350","5":"42.1"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"500","5":"12.5"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"500","5":"17.9"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"500","5":"19.5"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"500","5":"28.5"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"500","5":"30.9"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"500","5":"32.4"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"500","5":"32.5"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"500","5":"35.3"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"500","5":"38.6"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"500","5":"38.9"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"500","5":"40.6"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"500","5":"42.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"675","5":"13.7"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"675","5":"18.9"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"675","5":"22.2"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"675","5":"28.1"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"675","5":"31.1"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"675","5":"32.4"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"675","5":"35.4"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"675","5":"37.5"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"675","5":"39.2"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"675","5":"39.6"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"675","5":"41.4"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"675","5":"43.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"1000","5":"14.4"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"1000","5":"19.9"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"1000","5":"21.9"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"1000","5":"27.8"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"1000","5":"31.5"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"1000","5":"35.5"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"1000","5":"38.7"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"1000","5":"39.7"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"1000","5":"41.4"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"1000","5":"42.4"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"1000","5":"44.3"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"1000","5":"45.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Use parameter <code>desc(col_name)</code> to sort in descending order:</p>
<pre class="r"><code>arrange(CO2, desc(conc), desc(uptake))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["conc"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uptake"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"1000","5":"45.5"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"1000","5":"44.3"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"1000","5":"42.4"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"1000","5":"41.4"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"1000","5":"39.7"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"1000","5":"38.7"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"1000","5":"35.5"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"1000","5":"31.5"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"1000","5":"27.8"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"1000","5":"21.9"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"1000","5":"19.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"1000","5":"14.4"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"675","5":"43.9"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"675","5":"41.4"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"675","5":"39.6"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"675","5":"39.2"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"675","5":"37.5"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"675","5":"35.4"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"675","5":"32.4"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"675","5":"31.1"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"675","5":"28.1"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"675","5":"22.2"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"675","5":"18.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"675","5":"13.7"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"500","5":"42.9"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"500","5":"40.6"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"500","5":"38.9"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"500","5":"38.6"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"500","5":"35.3"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"500","5":"32.5"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"500","5":"32.4"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"500","5":"30.9"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"500","5":"28.5"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"500","5":"19.5"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"500","5":"17.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"500","5":"12.5"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"350","5":"42.1"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"350","5":"41.8"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"350","5":"38.8"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"350","5":"37.2"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"350","5":"34.6"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"350","5":"34.0"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"350","5":"31.8"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"350","5":"30.0"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"350","5":"27.9"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"350","5":"18.9"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"350","5":"17.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"350","5":"13.0"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"250","5":"40.3"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"250","5":"38.1"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"250","5":"37.1"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"250","5":"35.0"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"250","5":"34.8"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"250","5":"30.6"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"250","5":"30.3"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"250","5":"26.2"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"250","5":"25.8"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"250","5":"18.1"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"250","5":"17.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"250","5":"12.3"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"175","5":"32.4"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","5":"30.4"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"175","5":"27.3"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"175","5":"27.3"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"175","5":"24.1"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"175","5":"22.0"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"175","5":"21.0"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"175","5":"19.4"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"175","5":"19.2"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"175","5":"18.0"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"175","5":"14.9"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"175","5":"11.4"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"95","5":"16.2"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","5":"16.0"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"95","5":"15.1"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"95","5":"14.2"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"95","5":"13.6"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"95","5":"12.0"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"95","5":"11.3"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"95","5":"10.6"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"95","5":"10.6"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"95","5":"10.5"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"95","5":"9.3"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"95","5":"7.7"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div id="exercises-2" class="section level2">
<h2><span class="header-section-number">4.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Sort by <code>date</code> in ascending order:</p></li>
<li><p>Overwrite <code>data</code> with sorted output:</p></li>
</ol>
</div>
</div>
<div id="select-columns-and-rows" class="section level1">
<h1><span class="header-section-number">5</span> Select columns and rows</h1>
<p>You can select specific columns of a dataframe by <code>select()</code>. Only columns where conditions are true are selected. For example, selecting a column by its column name:</p>
<pre class="r"><code>select(CO2, uptake)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["uptake"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"16.0","_rn_":"1"},{"1":"30.4","_rn_":"2"},{"1":"34.8","_rn_":"3"},{"1":"37.2","_rn_":"4"},{"1":"35.3","_rn_":"5"},{"1":"39.2","_rn_":"6"},{"1":"39.7","_rn_":"7"},{"1":"13.6","_rn_":"8"},{"1":"27.3","_rn_":"9"},{"1":"37.1","_rn_":"10"},{"1":"41.8","_rn_":"11"},{"1":"40.6","_rn_":"12"},{"1":"41.4","_rn_":"13"},{"1":"44.3","_rn_":"14"},{"1":"16.2","_rn_":"15"},{"1":"32.4","_rn_":"16"},{"1":"40.3","_rn_":"17"},{"1":"42.1","_rn_":"18"},{"1":"42.9","_rn_":"19"},{"1":"43.9","_rn_":"20"},{"1":"45.5","_rn_":"21"},{"1":"14.2","_rn_":"22"},{"1":"24.1","_rn_":"23"},{"1":"30.3","_rn_":"24"},{"1":"34.6","_rn_":"25"},{"1":"32.5","_rn_":"26"},{"1":"35.4","_rn_":"27"},{"1":"38.7","_rn_":"28"},{"1":"9.3","_rn_":"29"},{"1":"27.3","_rn_":"30"},{"1":"35.0","_rn_":"31"},{"1":"38.8","_rn_":"32"},{"1":"38.6","_rn_":"33"},{"1":"37.5","_rn_":"34"},{"1":"42.4","_rn_":"35"},{"1":"15.1","_rn_":"36"},{"1":"21.0","_rn_":"37"},{"1":"38.1","_rn_":"38"},{"1":"34.0","_rn_":"39"},{"1":"38.9","_rn_":"40"},{"1":"39.6","_rn_":"41"},{"1":"41.4","_rn_":"42"},{"1":"10.6","_rn_":"43"},{"1":"19.2","_rn_":"44"},{"1":"26.2","_rn_":"45"},{"1":"30.0","_rn_":"46"},{"1":"30.9","_rn_":"47"},{"1":"32.4","_rn_":"48"},{"1":"35.5","_rn_":"49"},{"1":"12.0","_rn_":"50"},{"1":"22.0","_rn_":"51"},{"1":"30.6","_rn_":"52"},{"1":"31.8","_rn_":"53"},{"1":"32.4","_rn_":"54"},{"1":"31.1","_rn_":"55"},{"1":"31.5","_rn_":"56"},{"1":"11.3","_rn_":"57"},{"1":"19.4","_rn_":"58"},{"1":"25.8","_rn_":"59"},{"1":"27.9","_rn_":"60"},{"1":"28.5","_rn_":"61"},{"1":"28.1","_rn_":"62"},{"1":"27.8","_rn_":"63"},{"1":"10.5","_rn_":"64"},{"1":"14.9","_rn_":"65"},{"1":"18.1","_rn_":"66"},{"1":"18.9","_rn_":"67"},{"1":"19.5","_rn_":"68"},{"1":"22.2","_rn_":"69"},{"1":"21.9","_rn_":"70"},{"1":"7.7","_rn_":"71"},{"1":"11.4","_rn_":"72"},{"1":"12.3","_rn_":"73"},{"1":"13.0","_rn_":"74"},{"1":"12.5","_rn_":"75"},{"1":"13.7","_rn_":"76"},{"1":"14.4","_rn_":"77"},{"1":"10.6","_rn_":"78"},{"1":"18.0","_rn_":"79"},{"1":"17.9","_rn_":"80"},{"1":"17.9","_rn_":"81"},{"1":"17.9","_rn_":"82"},{"1":"18.9","_rn_":"83"},{"1":"19.9","_rn_":"84"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>To select all columns except a specific column use the minus symbol before its name:</p>
<pre class="r"><code>select(CO2, -uptake)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["conc"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","_rn_":"1"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","_rn_":"2"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"250","_rn_":"3"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"350","_rn_":"4"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"500","_rn_":"5"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"675","_rn_":"6"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"1000","_rn_":"7"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"95","_rn_":"8"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"175","_rn_":"9"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"250","_rn_":"10"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"350","_rn_":"11"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"500","_rn_":"12"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"675","_rn_":"13"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"1000","_rn_":"14"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"95","_rn_":"15"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"175","_rn_":"16"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"250","_rn_":"17"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"350","_rn_":"18"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"500","_rn_":"19"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"675","_rn_":"20"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"1000","_rn_":"21"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"95","_rn_":"22"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"175","_rn_":"23"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"250","_rn_":"24"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"350","_rn_":"25"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"500","_rn_":"26"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"675","_rn_":"27"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"1000","_rn_":"28"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"95","_rn_":"29"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"175","_rn_":"30"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"250","_rn_":"31"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"350","_rn_":"32"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"500","_rn_":"33"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"675","_rn_":"34"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"1000","_rn_":"35"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"95","_rn_":"36"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"175","_rn_":"37"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"250","_rn_":"38"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"350","_rn_":"39"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"500","_rn_":"40"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"675","_rn_":"41"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"1000","_rn_":"42"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"95","_rn_":"43"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"175","_rn_":"44"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"250","_rn_":"45"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"350","_rn_":"46"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"500","_rn_":"47"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"675","_rn_":"48"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"1000","_rn_":"49"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"95","_rn_":"50"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"175","_rn_":"51"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"250","_rn_":"52"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"350","_rn_":"53"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"500","_rn_":"54"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"675","_rn_":"55"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"1000","_rn_":"56"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"95","_rn_":"57"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"175","_rn_":"58"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"250","_rn_":"59"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"350","_rn_":"60"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"500","_rn_":"61"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"675","_rn_":"62"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"1000","_rn_":"63"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"95","_rn_":"64"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"175","_rn_":"65"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"250","_rn_":"66"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"350","_rn_":"67"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"500","_rn_":"68"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"675","_rn_":"69"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"1000","_rn_":"70"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"95","_rn_":"71"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"175","_rn_":"72"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"250","_rn_":"73"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"350","_rn_":"74"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"500","_rn_":"75"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"675","_rn_":"76"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"1000","_rn_":"77"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"95","_rn_":"78"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"175","_rn_":"79"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"250","_rn_":"80"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"350","_rn_":"81"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"500","_rn_":"82"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"675","_rn_":"83"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"1000","_rn_":"84"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>To select rows use <code>filter()</code>. Again, one or multiple filters can be applied to filter the targeted rows:</p>
<pre class="r"><code>filter(CO2, 
  Type == &quot;Quebec&quot;, 
  Treatment == &quot;nonchilled&quot;, 
  conc  &lt; 200
)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["conc"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uptake"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","5":"16.0"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","5":"30.4"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"95","5":"13.6"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"175","5":"27.3"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"95","5":"16.2"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"175","5":"32.4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>A condition can be any logical operator (<code>&gt;</code>, <code>&gt;</code>, <code>&lt;=</code>,â€¦). For example, to get only those rows for which the <code>weight_in_g</code> is smaller than 40, use <code>filter(data, weight_in_g &lt; 40)</code>.</p>
<div id="exercises-3" class="section level2">
<h2><span class="header-section-number">5.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Display the column <code>weight_in_g</code>:</p></li>
<li><p>Display only the records with <code>weight_in_g &gt; 30</code>:</p></li>
<li><p>Select females with <code>weight_in_g &gt; 30</code>:</p></li>
<li><p>Display only <code>weight_in_g</code> of females with <code>weight_in_g &gt; 30</code>:</p></li>
<li><p>Save output of (4) as <code>females_weight_above_30</code>:</p></li>
<li><p>Select all columns from <code>data</code> except the <code>device_remarks</code> column:</p></li>
</ol>
</div>
</div>
<div id="pipes" class="section level1">
<h1><span class="header-section-number">6</span> Pipes</h1>
<p>As you probably noticed, we need to create new <code>data.frame</code> everytime we want to apply two or more functions. This method has several disadvantages, i.a. messy workspace, higher chance of typos,â€¦</p>
<p>An alternative is to wrap (<em>nest</em>) functions one within each other, so that the output of a function would be considered the input of the other one. For example, if we have to apply <code>f1</code> to a dataframe <code>df</code> and <code>f2</code> to the output of <code>f1</code>, we write:</p>
<pre class="r"><code>f2(f1(df, ...), ...)</code></pre>
<pre class="r"><code>filter(select(CO2, uptake), uptake &gt; 30, uptake &lt; 31.8)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["uptake"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"30.4"},{"1":"30.3"},{"1":"30.9"},{"1":"30.6"},{"1":"31.1"},{"1":"31.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This way of working with functions is typical of programming and is implemented in many other programming languages. The disadvantage of this approach is readibility: you have to read from right to left in order to understand what happens with our data!</p>
<p>Can we avoid deciphering nested function calls, and making excessive use of temporary <code>data.frames</code>? The answer is yes, thanks to <em>pipe</em> operators. The most used one is the <em>forward pipe</em>: <code>%&gt;%</code>, from the magrittr package. We can then rewrite the example above by using <code>%&gt;%</code>:</p>
<pre class="r"><code>df %&gt;% f1(...) %&gt;% f2(...)</code></pre>
<pre class="r"><code>CO2 %&gt;% 
  select(uptake) %&gt;% 
  filter(uptake &gt; 30, uptake &lt; 31.8)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["uptake"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"30.4"},{"1":"30.3"},{"1":"30.9"},{"1":"30.6"},{"1":"31.1"},{"1":"31.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Easy, isnâ€™t?</p>
<p>As Stefan Milton, author of magrittr, wrote in <a href="https://www.r-statistics.com/2014/08/simpler-r-coding-with-pipes-the-present-and-future-of-the-magrittr-package/">this</a> blogpost:</p>
<blockquote>
<p>The order in which youâ€™d think of these steps is the same as the order in which they are written, and as the order in which they are executed.</p>
</blockquote>
<p>If you want to create a new object (i.e. <code>data.frame</code>) based on the output of a series of functions:</p>
<pre class="r"><code>df2 &lt;- df %&gt;% f1(...) %&gt;% f2(...)</code></pre>
<pre class="r"><code>small_uptakes &lt;- CO2 %&gt;% 
  select(uptake) %&gt;% 
  filter(uptake &gt; 30, uptake &lt; 31.8)</code></pre>
<p>If you want to overwrite the input dataframe, you can use the <em>compound assignment operator</em>, <code>%&lt;&gt;%</code> which can be read as the composition of the forward pipe <code>%&gt;%</code>, and asignment symbol <code>&lt;-</code>:</p>
<pre class="r"><code>df %&lt;&gt;% f1(...) %&gt;% f2(...)</code></pre>
<p>We apply all steps on the right of <code>%&lt;&gt;%</code> to <code>df</code> and overwrite it with the final ouput.</p>
<pre class="r"><code>library(magrittr)
small_uptakes %&lt;&gt;% filter(uptake &lt; 31)</code></pre>
<pre class="r"><code>small_uptakes</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["uptake"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"30.4"},{"1":"30.3"},{"1":"30.9"},{"1":"30.6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="alert alert-warning">
<p><strong>Note</strong></p>
<p><code>%&lt;&gt;%</code> is part of the package <code>magrittr</code>, which is not loaded with tidyverse or dplyr. You need to load it separately: <code>library(margrittr)</code></p>
</div>
<div id="exercises-4" class="section level2">
<h2><span class="header-section-number">6.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Display the column <code>weight_in_g</code> with values &gt; 30 using pipes:</p></li>
<li><p>Select females with <code>weight_in_g &gt; 30</code> using pipes</p></li>
<li><p>Display only weight_in_g of females with weight in g &gt; 30:</p></li>
<li><p>Save output of (3) as a new <code>data.frame</code>: <code>females_weight_above_30</code>:</p></li>
</ol>
</div>
</div>
<div id="distinct-values" class="section level1">
<h1><span class="header-section-number">7</span> Distinct values</h1>
<p>The function <code>distinct()</code> retains only unique/distinct values of an input vector. If applied to dataframe, it retains only unique/distinct rows. For example, to know which types of plants were used:</p>
<pre class="r"><code>CO2 %&gt;%
  select(Type) %&gt;%
  distinct()</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Type"],"name":[1],"type":["fctr"],"align":["left"]}],"data":[{"1":"Quebec"},{"1":"Mississippi"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div id="exercises-5" class="section level2">
<h2><span class="header-section-number">7.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Show the unique sex values:</p></li>
<li><p>Show the unique species values:</p></li>
</ol>
</div>
</div>
<div id="summarize-data" class="section level1">
<h1><span class="header-section-number">8</span> Summarize data</h1>
<p>By using <code>select()</code> you can for example calculate minimum or maximum of a specific column.</p>
<p>The minimum uptake:</p>
<pre class="r"><code>CO2 %&gt;% 
  select(uptake) %&gt;%
  min()</code></pre>
<pre><code>## [1] 7.7</code></pre>
<p>And the maximum uptake:</p>
<pre class="r"><code>CO2 %&gt;% 
  select(uptake) %&gt;%
  max()</code></pre>
<pre><code>## [1] 45.5</code></pre>
<p>But what if you want to calculate the minimum and maximum uptake for each plant? You need then to split the data by <code>Plant</code> values and calculate the mimnimum and maximum for each group. We can do it via <code>%&gt;%</code> and two functions from dplyr library: <code>group_by()</code> and <code>summarize()</code>:</p>
<pre class="r"><code>CO2 %&gt;%
  group_by(Plant) %&gt;%
  summarize(
    min_uptake = min(uptake),
    max_uptake = max(uptake)
  )</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["min_uptake"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["max_uptake"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Qn1","2":"16.0","3":"39.7"},{"1":"Qn2","2":"13.6","3":"44.3"},{"1":"Qn3","2":"16.2","3":"45.5"},{"1":"Qc1","2":"14.2","3":"38.7"},{"1":"Qc3","2":"15.1","3":"41.4"},{"1":"Qc2","2":"9.3","3":"42.4"},{"1":"Mn3","2":"11.3","3":"28.5"},{"1":"Mn2","2":"12.0","3":"32.4"},{"1":"Mn1","2":"10.6","3":"35.5"},{"1":"Mc2","2":"7.7","3":"14.4"},{"1":"Mc3","2":"10.6","3":"19.9"},{"1":"Mc1","2":"10.5","3":"22.2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Theoretically this kind of workflow is called the <em>split-apply-combine paradigm</em>: <em>split</em> the data into groups, <em>apply</em> some analysis to each group, and then <em>combine</em> the results together.Interesting to notice that <code>group_by</code> actually doesnâ€™t modify the data contained in the dataframe, but adds an internal grouping to the dataframe, which is visible if you run:</p>
<pre class="r"><code>class(CO2 %&gt;% group_by(Plant))</code></pre>
<pre><code>## [1] &quot;grouped_df&quot; &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>For counting how many rows (with unique) in each group you can use <code>count()</code> instead of <code>summarize()</code>:</p>
<pre class="r"><code>CO2 %&gt;%
  group_by(Plant) %&gt;%
  count()</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Qn1","2":"7"},{"1":"Qn2","2":"7"},{"1":"Qn3","2":"7"},{"1":"Qc1","2":"7"},{"1":"Qc3","2":"7"},{"1":"Qc2","2":"7"},{"1":"Mn3","2":"7"},{"1":"Mn2","2":"7"},{"1":"Mn1","2":"7"},{"1":"Mc2","2":"7"},{"1":"Mc3","2":"7"},{"1":"Mc1","2":"7"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div id="exercises-6" class="section level2">
<h2><span class="header-section-number">8.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Count records per sex:</p></li>
<li><p>What is the mean weight? Consider to use function <code>mean()</code> combined with parameter <code>na.rm = TRUE</code> in order to ignore (remove) <code>NA</code> while calculating the mean:</p></li>
<li><p>Show mean weight per sex:</p></li>
<li><p>Show mean weight per sex and species:</p></li>
<li><p>Show minimum, maximum and mean weight per sex and species and save output as <code>weight_per_species_sex</code>. Consider to use <code>min()</code> and <code>max()</code>) combined with parameter <code>na.rm = TRUE</code> in order to ignore <code>NA</code> while calculating minimum and maximum:</p></li>
</ol>
</div>
</div>
<div id="reshape-data" class="section level1">
<h1><span class="header-section-number">9</span> Reshape data</h1>
<p>These two functions provide opposite functionalities. While <code>spread()</code> <em>spreads</em> rows into columns, <code>gather()</code> <em>gathers</em> columns into rows. An example can be found in these two images from <a href="http://www.datacarpentry.org/R-ecology-lesson/03-dplyr.html#reshaping_with_gather_and_spread">Data Carpentry</a>:</p>
<div class="figure">
<img src="static/images/spread_data_R.png" alt="spread" />
<p class="caption">spread</p>
</div>
<div class="figure">
<img src="static/images/gather_data_R.png" alt="gather" />
<p class="caption">gather</p>
</div>
<p>Notice that <code>spread()</code> and <code>gather()</code> arenâ€™t dplyr functions but come from the tidyr library.</p>
<div id="exercises-7" class="section level2">
<h2><span class="header-section-number">9.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Spread <code>weight_per_species_sex</code> to key on <code>sex</code> and values from <code>mean_weight</code> and save output as <code>weight_per_species_sex_spread</code>:</p></li>
<li><p>Gather back the data and save output as <code>weight_per_species_sex_gather</code>. Is <code>weight_per_species_sex_gather</code> equal to <code>weight_per_species_sex</code>?</p></li>
</ol>
</div>
</div>
<div id="rename-add-and-update-columns" class="section level1">
<h1><span class="header-section-number">10</span> Rename, add and update columns</h1>
<p>Sometimes you need to rename one or more columns. You can do it using function <code>rename()</code>:</p>
<pre class="r"><code>df %&gt;% rename(new_colname = old_colname)</code></pre>
<p>An example:</p>
<pre class="r"><code>CO2 %&gt;% rename(Conc = conc)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Conc"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uptake"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","5":"16.0","_rn_":"1"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","5":"30.4","_rn_":"2"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"250","5":"34.8","_rn_":"3"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"350","5":"37.2","_rn_":"4"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"500","5":"35.3","_rn_":"5"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"675","5":"39.2","_rn_":"6"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"1000","5":"39.7","_rn_":"7"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"95","5":"13.6","_rn_":"8"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"175","5":"27.3","_rn_":"9"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"250","5":"37.1","_rn_":"10"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"350","5":"41.8","_rn_":"11"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"500","5":"40.6","_rn_":"12"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"675","5":"41.4","_rn_":"13"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"1000","5":"44.3","_rn_":"14"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"95","5":"16.2","_rn_":"15"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"175","5":"32.4","_rn_":"16"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"250","5":"40.3","_rn_":"17"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"350","5":"42.1","_rn_":"18"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"500","5":"42.9","_rn_":"19"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"675","5":"43.9","_rn_":"20"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"1000","5":"45.5","_rn_":"21"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"95","5":"14.2","_rn_":"22"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"175","5":"24.1","_rn_":"23"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"250","5":"30.3","_rn_":"24"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"350","5":"34.6","_rn_":"25"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"500","5":"32.5","_rn_":"26"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"675","5":"35.4","_rn_":"27"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"1000","5":"38.7","_rn_":"28"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"95","5":"9.3","_rn_":"29"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"175","5":"27.3","_rn_":"30"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"250","5":"35.0","_rn_":"31"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"350","5":"38.8","_rn_":"32"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"500","5":"38.6","_rn_":"33"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"675","5":"37.5","_rn_":"34"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"1000","5":"42.4","_rn_":"35"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"95","5":"15.1","_rn_":"36"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"175","5":"21.0","_rn_":"37"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"250","5":"38.1","_rn_":"38"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"350","5":"34.0","_rn_":"39"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"500","5":"38.9","_rn_":"40"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"675","5":"39.6","_rn_":"41"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"1000","5":"41.4","_rn_":"42"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"95","5":"10.6","_rn_":"43"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"175","5":"19.2","_rn_":"44"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"250","5":"26.2","_rn_":"45"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"350","5":"30.0","_rn_":"46"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"500","5":"30.9","_rn_":"47"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"675","5":"32.4","_rn_":"48"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"1000","5":"35.5","_rn_":"49"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"95","5":"12.0","_rn_":"50"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"175","5":"22.0","_rn_":"51"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"250","5":"30.6","_rn_":"52"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"350","5":"31.8","_rn_":"53"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"500","5":"32.4","_rn_":"54"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"675","5":"31.1","_rn_":"55"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"1000","5":"31.5","_rn_":"56"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"95","5":"11.3","_rn_":"57"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"175","5":"19.4","_rn_":"58"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"250","5":"25.8","_rn_":"59"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"350","5":"27.9","_rn_":"60"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"500","5":"28.5","_rn_":"61"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"675","5":"28.1","_rn_":"62"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"1000","5":"27.8","_rn_":"63"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"95","5":"10.5","_rn_":"64"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"175","5":"14.9","_rn_":"65"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"250","5":"18.1","_rn_":"66"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"350","5":"18.9","_rn_":"67"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"500","5":"19.5","_rn_":"68"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"675","5":"22.2","_rn_":"69"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"1000","5":"21.9","_rn_":"70"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"95","5":"7.7","_rn_":"71"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"175","5":"11.4","_rn_":"72"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"250","5":"12.3","_rn_":"73"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"350","5":"13.0","_rn_":"74"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"500","5":"12.5","_rn_":"75"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"675","5":"13.7","_rn_":"76"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"1000","5":"14.4","_rn_":"77"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"95","5":"10.6","_rn_":"78"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"175","5":"18.0","_rn_":"79"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"250","5":"17.9","_rn_":"80"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"350","5":"17.9","_rn_":"81"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"500","5":"17.9","_rn_":"82"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"675","5":"18.9","_rn_":"83"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"1000","5":"19.9","_rn_":"84"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Another typical data analysis task is to create new columns based on the values of existing ones, like converting units or calculating the ratio of values in two columns. We can use the function <code>mutate()</code>:</p>
<pre class="r"><code>new_df &lt;- df %&gt;% mutate(new_column = ...)</code></pre>
<p>An example using <code>CO2</code> dataframe:</p>
<pre class="r"><code>CO2_dev_mean &lt;- CO2 %&gt;% mutate(dev_mean_uptake = uptake - mean(uptake))</code></pre>
<p>Or you can modify the original dataframe:</p>
<pre class="r"><code>df %&lt;&gt;% mutate(new_column = ...)</code></pre>
<pre class="r"><code>CO2 %&lt;&gt;% mutate(dev_mean_uptake = uptake - mean(uptake))

head(CO2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["conc"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uptake"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["dev_mean_uptake"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","5":"16.0","6":"-11.213095","_rn_":"1"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","5":"30.4","6":"3.186905","_rn_":"2"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"250","5":"34.8","6":"7.586905","_rn_":"3"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"350","5":"37.2","6":"9.986905","_rn_":"4"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"500","5":"35.3","6":"8.086905","_rn_":"5"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"675","5":"39.2","6":"11.986905","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can also use <code>mutate()</code> to change the values in a column without creating a new one. In the example below we change the new column <code>dev_mean_uptake</code> by applying absolute value:</p>
<pre class="r"><code>CO2 %&lt;&gt;% mutate(dev_mean_uptake = abs(dev_mean_uptake))

head(CO2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["conc"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uptake"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["dev_mean_uptake"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","5":"16.0","6":"11.213095","_rn_":"1"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","5":"30.4","6":"3.186905","_rn_":"2"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"250","5":"34.8","6":"7.586905","_rn_":"3"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"350","5":"37.2","6":"9.986905","_rn_":"4"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"500","5":"35.3","6":"8.086905","_rn_":"5"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"675","5":"39.2","6":"11.986905","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div id="exercises-8" class="section level2">
<h2><span class="header-section-number">10.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Rename column <code>weight_in_g</code> of <code>data</code> to <code>weight</code> and overwrite <code>data</code>:</p></li>
<li><p>Convert <code>weight</code> values in gram to kg:</p></li>
<li><p>Add column <code>country</code> with a fixed value <code>US</code>:</p></li>
<li><p>Add column <code>parsed_date</code> by applying the function <code>as.Date(column)</code> to the <code>date</code> column:</p></li>
</ol>
</div>
</div>
<div id="translate-data" class="section level1">
<h1><span class="header-section-number">11</span> Translate data</h1>
<p>Have you ever wanted to use a kind of <em>find and replace</em> function in R? Then itâ€™s time to use the dplyr functions <code>recode()</code> and <code>case_when</code>: the first function allows you to replace specific values based on a logical condition and it works with vectors. An example:</p>
<pre class="r"><code>types &lt;- CO2$Type # Extract Type from dataframe

recode(types, 
  Quebec = &quot;Canada&quot;,
  Mississippi = &quot;USA&quot;
)</code></pre>
<pre><code>##  [1] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [11] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [21] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [31] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [41] Canada Canada USA    USA    USA    USA    USA    USA    USA    USA   
## [51] USA    USA    USA    USA    USA    USA    USA    USA    USA    USA   
## [61] USA    USA    USA    USA    USA    USA    USA    USA    USA    USA   
## [71] USA    USA    USA    USA    USA    USA    USA    USA    USA    USA   
## [81] USA    USA    USA    USA   
## Levels: Canada USA</code></pre>
<p>You can specify a <code>default</code> value: it will be given to all values not otherwise matched. And if you want replace missing values (NA), then you can specify a value to the parameter <code>missing</code>.</p>
<pre class="r"><code>recode(types, 
  Quebec = &quot;Canada&quot;,
  .default = &quot;World&quot;
)</code></pre>
<pre><code>##  [1] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [11] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [21] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [31] Canada Canada Canada Canada Canada Canada Canada Canada Canada Canada
## [41] Canada Canada World  World  World  World  World  World  World  World 
## [51] World  World  World  World  World  World  World  World  World  World 
## [61] World  World  World  World  World  World  World  World  World  World 
## [71] World  World  World  World  World  World  World  World  World  World 
## [81] World  World  World  World 
## Levels: Canada World</code></pre>
<p>A similar function is <code>case_when()</code> which allows you to vectorise multiple <code>if</code> and <code>if else</code> statements and it works with vectors and dataframes as well. <code>case_when()</code> is often used inside <code>mutate()</code> when you want to make a new column (or change an existing one) based on a complex combination of existing column variables. An example:</p>
<pre class="r"><code>CO2 %&gt;% mutate(response_level = case_when(
  uptake / conc &gt; 0.15 ~ &quot;high&quot;,
  uptake / conc &gt; 0.1 ~ &quot;medium&quot;,
  TRUE ~  &quot;low&quot;)
)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Plant"],"name":[1],"type":["ord"],"align":["right"]},{"label":["Type"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Treatment"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["conc"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["uptake"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["dev_mean_uptake"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["response_level"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"95","5":"16.0","6":"11.21309524","7":"high"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"175","5":"30.4","6":"3.18690476","7":"high"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"250","5":"34.8","6":"7.58690476","7":"medium"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"350","5":"37.2","6":"9.98690476","7":"medium"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"500","5":"35.3","6":"8.08690476","7":"low"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"675","5":"39.2","6":"11.98690476","7":"low"},{"1":"Qn1","2":"Quebec","3":"nonchilled","4":"1000","5":"39.7","6":"12.48690476","7":"low"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"95","5":"13.6","6":"13.61309524","7":"medium"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"175","5":"27.3","6":"0.08690476","7":"high"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"250","5":"37.1","6":"9.88690476","7":"medium"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"350","5":"41.8","6":"14.58690476","7":"medium"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"500","5":"40.6","6":"13.38690476","7":"low"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"675","5":"41.4","6":"14.18690476","7":"low"},{"1":"Qn2","2":"Quebec","3":"nonchilled","4":"1000","5":"44.3","6":"17.08690476","7":"low"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"95","5":"16.2","6":"11.01309524","7":"high"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"175","5":"32.4","6":"5.18690476","7":"high"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"250","5":"40.3","6":"13.08690476","7":"high"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"350","5":"42.1","6":"14.88690476","7":"medium"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"500","5":"42.9","6":"15.68690476","7":"low"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"675","5":"43.9","6":"16.68690476","7":"low"},{"1":"Qn3","2":"Quebec","3":"nonchilled","4":"1000","5":"45.5","6":"18.28690476","7":"low"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"95","5":"14.2","6":"13.01309524","7":"medium"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"175","5":"24.1","6":"3.11309524","7":"medium"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"250","5":"30.3","6":"3.08690476","7":"medium"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"350","5":"34.6","6":"7.38690476","7":"low"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"500","5":"32.5","6":"5.28690476","7":"low"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"675","5":"35.4","6":"8.18690476","7":"low"},{"1":"Qc1","2":"Quebec","3":"chilled","4":"1000","5":"38.7","6":"11.48690476","7":"low"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"95","5":"9.3","6":"17.91309524","7":"low"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"175","5":"27.3","6":"0.08690476","7":"high"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"250","5":"35.0","6":"7.78690476","7":"medium"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"350","5":"38.8","6":"11.58690476","7":"medium"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"500","5":"38.6","6":"11.38690476","7":"low"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"675","5":"37.5","6":"10.28690476","7":"low"},{"1":"Qc2","2":"Quebec","3":"chilled","4":"1000","5":"42.4","6":"15.18690476","7":"low"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"95","5":"15.1","6":"12.11309524","7":"high"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"175","5":"21.0","6":"6.21309524","7":"medium"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"250","5":"38.1","6":"10.88690476","7":"high"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"350","5":"34.0","6":"6.78690476","7":"low"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"500","5":"38.9","6":"11.68690476","7":"low"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"675","5":"39.6","6":"12.38690476","7":"low"},{"1":"Qc3","2":"Quebec","3":"chilled","4":"1000","5":"41.4","6":"14.18690476","7":"low"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"95","5":"10.6","6":"16.61309524","7":"medium"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"175","5":"19.2","6":"8.01309524","7":"medium"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"250","5":"26.2","6":"1.01309524","7":"medium"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"350","5":"30.0","6":"2.78690476","7":"low"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"500","5":"30.9","6":"3.68690476","7":"low"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"675","5":"32.4","6":"5.18690476","7":"low"},{"1":"Mn1","2":"Mississippi","3":"nonchilled","4":"1000","5":"35.5","6":"8.28690476","7":"low"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"95","5":"12.0","6":"15.21309524","7":"medium"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"175","5":"22.0","6":"5.21309524","7":"medium"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"250","5":"30.6","6":"3.38690476","7":"medium"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"350","5":"31.8","6":"4.58690476","7":"low"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"500","5":"32.4","6":"5.18690476","7":"low"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"675","5":"31.1","6":"3.88690476","7":"low"},{"1":"Mn2","2":"Mississippi","3":"nonchilled","4":"1000","5":"31.5","6":"4.28690476","7":"low"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"95","5":"11.3","6":"15.91309524","7":"medium"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"175","5":"19.4","6":"7.81309524","7":"medium"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"250","5":"25.8","6":"1.41309524","7":"medium"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"350","5":"27.9","6":"0.68690476","7":"low"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"500","5":"28.5","6":"1.28690476","7":"low"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"675","5":"28.1","6":"0.88690476","7":"low"},{"1":"Mn3","2":"Mississippi","3":"nonchilled","4":"1000","5":"27.8","6":"0.58690476","7":"low"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"95","5":"10.5","6":"16.71309524","7":"medium"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"175","5":"14.9","6":"12.31309524","7":"low"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"250","5":"18.1","6":"9.11309524","7":"low"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"350","5":"18.9","6":"8.31309524","7":"low"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"500","5":"19.5","6":"7.71309524","7":"low"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"675","5":"22.2","6":"5.01309524","7":"low"},{"1":"Mc1","2":"Mississippi","3":"chilled","4":"1000","5":"21.9","6":"5.31309524","7":"low"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"95","5":"7.7","6":"19.51309524","7":"low"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"175","5":"11.4","6":"15.81309524","7":"low"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"250","5":"12.3","6":"14.91309524","7":"low"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"350","5":"13.0","6":"14.21309524","7":"low"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"500","5":"12.5","6":"14.71309524","7":"low"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"675","5":"13.7","6":"13.51309524","7":"low"},{"1":"Mc2","2":"Mississippi","3":"chilled","4":"1000","5":"14.4","6":"12.81309524","7":"low"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"95","5":"10.6","6":"16.61309524","7":"medium"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"175","5":"18.0","6":"9.21309524","7":"medium"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"250","5":"17.9","6":"9.31309524","7":"low"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"350","5":"17.9","6":"9.31309524","7":"low"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"500","5":"17.9","6":"9.31309524","7":"low"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"675","5":"18.9","6":"8.31309524","7":"low"},{"1":"Mc3","2":"Mississippi","3":"chilled","4":"1000","5":"19.9","6":"7.31309524","7":"low"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Based on the ratio between uptake and carbon dioxide concentration, a new column variable, <code>response_level</code>, is created with values based on the conditions listed in <code>case_when()</code>.</p>
<div id="exercise" class="section level2">
<h2><span class="header-section-number">11.1</span> Exercise</h2>
<ol style="list-style-type: decimal">
<li>Add column <code>scientific_name</code> with the full scientific name of each species based on the table below and save the output in <code>data_scientificname</code>:</li>
</ol>
<table>
<thead>
<tr class="header">
<th>species</th>
<th>scientific name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>DM</td>
<td>Dimarella riparia (Navas, 1918)</td>
</tr>
<tr class="even">
<td>DO</td>
<td>Dondice occidentalis (Engel, 1925)</td>
</tr>
<tr class="odd">
<td>DS</td>
<td>Distonemurus desertus Krivokhatsky, 1992</td>
</tr>
<tr class="even">
<td>OL</td>
<td>Olios scepticus Chamberlin, 1924</td>
</tr>
<tr class="odd">
<td>PE</td>
<td>Petrochelidon nigricans (Vieillot, 1817)</td>
</tr>
<tr class="even">
<td>PF</td>
<td>Piffliella eduardi Hammer, 1979</td>
</tr>
<tr class="odd">
<td>OT</td>
<td>Ottoicus dissitus Drake, 1960</td>
</tr>
<tr class="even">
<td>OX</td>
<td>Oxybelus pallidus Arnold, 1927</td>
</tr>
<tr class="odd">
<td>NA</td>
<td>Not Available</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="export-data" class="section level1">
<h1><span class="header-section-number">12</span> Export data</h1>
<p>When satisfied about the cleaned data, maybe you would like to save the output. You can save a dataframe object by means of following functions:</p>
<ol style="list-style-type: decimal">
<li><code>write_tsv()</code> to write tab delimited files</li>
<li><code>write_csv()</code> to write comma separated files</li>
</ol>
<div id="exercises-9" class="section level2">
<h2><span class="header-section-number">12.1</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Export <code>females_weight_above_30</code> to <code>../data/processed/females_weight_above_30.csv</code>. Notice that the dataframe has only one column, so the choice of the separator makes no difference:</p></li>
<li><p>Export <code>data_scientificname</code> to a comma separated file with name <code>../data/processed/data_scientificname.csv</code> and include column names:</p></li>
</ol>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
